import{_ as t,E as s,X as e,a9 as o,U as a,z as l,B as i,o as d,c as n,w as c,i as u,e as h,f as r,b as f,d as g,t as L,F as p,q as _,I as G}from"./index-6786ed43.js";const m=t({data:()=>({goodList:[],selectGoodIdList:[],selectGoodList:[],totalMoney:0,token:s("accessToken")}),methods:{getGoodCarList:function(t){e("/shoppCar/getGoodToShoppCarList",{currentPage:1,pageSize:100,authorization:this.token}).then((t=>{const{code:s,data:e,total:o,flag:a}=t;if(2e3===s&&a){this.goodList=e.list;for(let t=0;t<this.goodList.length;t++)this.selectGoodIdList.split(",").includes(`${this.goodList[t].goodId}`)&&this.selectGoodList.push(this.goodList[t]);this.selectGoodList.map((t=>{this.totalMoney+=t.num*t.unitsPrice}))}})).catch((t=>console.log(t)))},settlement(){o("/shoppCar/getSettlement",{goodId:this.selectGoodIdList,authorization:this.token}).then((t=>{const{code:s,flag:e,data:o}=t;2e3===s&&e?(a("selectGoodList",[]),this.selectGoodList=[],this.totalMoney=0,l({title:"提交成功",icon:"success"}),i({url:"/pages/finishorderlist/index"})):(5003!==s&&"账号余额不足"!==o||i({url:"/pages/topup/index"}),l({title:`${o}`,icon:"none"}))})).catch((t=>console.log(t)))}},onLoad(t){this.token=s("accessToken"),this.selectGoodIdList=t.selectGoodList,this.getGoodCarList()}},[["render",function(t,s,e,o,a,l){const i=_,m=u,k=G;return d(),n(m,{class:"order-box"},{default:c((()=>[h(m,{class:"title"},{default:c((()=>[h(i,null,{default:c((()=>[r("订单明细")])),_:1})])),_:1}),h(m,{class:"order-mingxi"},{default:c((()=>[h(m,{class:"tips"},{default:c((()=>[h(i,null,{default:c((()=>[r("注：请确认如下订单明细")])),_:1})])),_:1}),(d(!0),f(p,null,g(a.selectGoodList,(t=>(d(),n(m,{class:"detail",key:t.goodId},{default:c((()=>[h(i,null,{default:c((()=>[r(L(t.goodName.slice(0,25))+"...",1)])),_:2},1024),h(i,null,{default:c((()=>[h(i,{class:"req-number"},{default:c((()=>[r(L(t.num),1)])),_:2},1024),r(" 人次 ")])),_:2},1024)])),_:2},1024)))),128))])),_:1}),h(m,{class:"total"},{default:c((()=>[h(i,null,{default:c((()=>[r("商品合计：")])),_:1}),h(i,{class:"money"},{default:c((()=>[r(L(a.totalMoney)+"金币",1)])),_:1})])),_:1}),h(m,{class:"btn-box"},{default:c((()=>[h(k,{type:"warn",onClick:l.settlement},{default:c((()=>[r("提交订单")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-4efe13c0"]]);export{m as default};
