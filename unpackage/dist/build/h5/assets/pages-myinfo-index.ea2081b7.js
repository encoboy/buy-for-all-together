import{_ as e,ah as a,ai as s,aj as t,E as l,ak as o,z as n,K as u,o as c,c as r,w as i,i as m,e as d,f,m as p,O as h,I as g,a6 as _}from"./index-6786ed43.js";import{g as I}from"./graceCheck.405c0f54.js";const b=e({data:()=>({img:"",userInfo:{}}),methods:{selectImg(){const e=this;a({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){console.log(JSON.stringify(a.tempFilePaths)),s({url:`${t}/backManage/uploadfile`,filePath:a.tempFilePaths[0],name:"file",formData:{authorization:l("accessToken")},success:a=>{const{data:s,flag:t}=JSON.parse(a.data);t&&(e.img=s)}})}})},formSubmit:function(e){let a=e.detail.value;I.check(a,[{name:"userName",checkType:"notnull",checkRule:"",errorMsg:"请填写用户名"},{name:"phone",checkType:"notnull",checkRule:"",errorMsg:"请填写手机号"},{name:"password",checkType:"notnull",checkRule:"",errorMsg:"请填写密码"}])?o("/user/editUser",{...a,image:this.img}).then((e=>{n({title:"修改成功",icon:"success"})})).catch((e=>console.log(e))):n({title:I.error,icon:"none"})},getUserInfo(){u("/userCenter/getUserMsg").then((e=>{const{flag:a,data:s}=e;e.flag&&(this.userInfo=s,this.img=s.image)})).catch((e=>console.log(e)))}},onLoad(){this.getUserInfo()}},[["render",function(e,a,s,t,l,o){const n=p,u=m,I=h,b=g,k=_;return c(),r(u,{class:"box"},{default:i((()=>[d(k,{onSubmit:o.formSubmit},{default:i((()=>[d(u,{class:"img_box"},{default:i((()=>[d(n,{src:l.img,mode:""},null,8,["src"]),d(u,{onClick:o.selectImg},{default:i((()=>[f("更换头像")])),_:1},8,["onClick"])])),_:1}),d(u,{class:"input-box"},{default:i((()=>[d(u,{class:"title"},{default:i((()=>[f("用户名：")])),_:1}),d(I,{type:"text",name:"userName",modelValue:l.userInfo.userName,"onUpdate:modelValue":a[0]||(a[0]=e=>l.userInfo.userName=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),d(u,{class:"input-box"},{default:i((()=>[d(u,{class:"title"},{default:i((()=>[f("新密码：")])),_:1}),d(I,{type:"text",name:"password",modelValue:l.userInfo.password,"onUpdate:modelValue":a[1]||(a[1]=e=>l.userInfo.password=e),placeholder:"请输入新密码"},null,8,["modelValue"])])),_:1}),d(u,{class:"input-box"},{default:i((()=>[d(u,{class:"title"},{default:i((()=>[f("手机号：")])),_:1}),d(I,{type:"text",name:"phone",modelValue:l.userInfo.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>l.userInfo.phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),d(u,{class:"uni-btn-v"},{default:i((()=>[d(b,{type:"warn","form-type":"submit"},{default:i((()=>[f("修改信息")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})}],["__scopeId","data-v-47faf175"]]);export{b as default};
